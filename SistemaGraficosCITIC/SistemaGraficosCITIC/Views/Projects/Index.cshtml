@model IEnumerable<SistemaGraficosCITIC.Models.Domain.Project>

@{
    ViewData["Title"] = "Index";
}

@if (User.Identity.IsAuthenticated)
{
    @*
    <h1>Index</h1>

    <p>
        <a asp-action="Create">Create New</a>
    </p>
    <table class="table">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Name)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Type)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.StartDate)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.EndDate)
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
    @foreach (var item in Model) {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Type)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.StartDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.EndDate)
                </td>
                <td>
                    <a asp-action="Edit" asp-route-id="@item.Id">Edit</a> |
                    <a asp-action="Details" asp-route-id="@item.Id">Details</a> |
                    <a asp-action="Delete" asp-route-id="@item.Id">Delete</a>
                </td>
            </tr>
    }
        </tbody>
    </table>
    *@

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
    @* <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script> *@
    <!-- Accordion scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.5.0/js/bootstrap.min.js"></script>
    

    <div class="container">

        @{
            int projectIndex = 0;
        }

        <h2 class="mt-2">Mis proyectos</h2>

        <hr />

        <div class="accordion" id="accordionProyectos">

            @foreach (var item in Model)
            {
                projectIndex++;
                var estado = item.IsActive ? "Activo" : "Inactivo";

                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#unProyecto" aria-expanded="false" aria-controls="unProyecto">
                            <h10 style="color: gray; padding-right: 25px;">@projectIndex</h10>
                            <h6> <b> @Html.DisplayFor(modelItem => item.Name) </b> </h6>
                        </button>
                    </h2>
                    <div id="unProyecto" class="accordion-collapse collapse" data-bs-parent="#accordionProyectos">
                        <div class="accordion-body">
                            <!-- INICIA body Proyecto -->

                            <table class="table">
                                <tbody>
                                    <tr>
                                        <td>Tipo: <b>@Html.DisplayFor(modelItem => item.Type)</b></td>
                                        <td>Fecha inicio: <b>@Html.DisplayFor(modelItem => item.StartDate)</b></td>
                                        @if(!item.IsActive)
                                        {
                                            <td>Fecha cierre: <b>@Html.DisplayFor(modelItem => item.EndDate)</b></td>
                                        }
                                        <td>Estado: <b>@estado</b></td>
                                    </tr>
                                </tbody>
                            </table>

                            <!-- ACORDEÓN -->
                            <div class="accordion mb-3" id="accordionDetalles">

                                <!-- PUBLICACIONES -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelPublicaciones" aria-expanded="true" aria-controls="panelPublicaciones">
                                            Publicaciones
                                        </button>
                                    </h2>
                                    <div id="panelPublicaciones" class="accordion-collapse collapse">
                                        <div class="accordion-body">
                                            <!-- INICIA body Publicaciones -->

                                            <div class="card mt-3" style="width: 18rem;">
                                                <div class="card-body">
                                                    <h5 class="card-title">TITULO</h5>
                                                    <h8 class="card-subtitle mb-2 text-body-secondary">##/##/##</h8>
                                                    <p class="card-text mt-2">Tipo: <b>TIPO</b> </p>
                                                    <p class="card-text">Referencia: <b>REF</b> </p>
                                                </div>
                                            </div>

                                            <!-- FIN body Publicaciones -->
                                        </div>
                                    </div>
                                </div>

                                <!-- EXPOSICIONES -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelExposiciones" aria-expanded="true" aria-controls="panelExposiciones">
                                            Exposiciones
                                        </button>
                                    </h2>
                                    <div id="panelExposiciones" class="accordion-collapse collapse">
                                        <div class="accordion-body">
                                            <!-- INICIA body Exposiciones -->

                                            <div class="card mt-3" style="width: 18rem;">
                                                <div class="card-body">
                                                    <h5 class="card-title">LUGAR</h5>
                                                    <h8 class="card-subtitle mb-2 text-body-secondary">##/##/##</h8>
                                                    <h6 class="card-subtitle mt-2 mb-2 text-body-secondary">CONTEXTO</h6>
                                                </div>
                                            </div>

                                            <!-- FIN body Exposiciones -->
                                        </div>
                                    </div>
                                </div>

                                <!-- PRODUCTOS -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelProductos" aria-expanded="true" aria-controls="panelProductos">
                                            Productos
                                        </button>
                                    </h2>
                                    <div id="panelProductos" class="accordion-collapse collapse">
                                        <div class="accordion-body">
                                            <!-- INICIA body Productos -->

                                            <div class="card mt-3" style="width: 18rem;">
                                                <div class="card-body">
                                                    <h5 class="card-title">NOMBRE</h5>
                                                    <h8 class="card-subtitle mb-2 text-body-secondary">estado • comercializable</h8>
                                                    <p class="card-text mt-2">(Descripción) Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vehicula imperdiet mauris, nec rutrum dui vestibulum ac.</p>
                                                    <p class="card-text">Licencia: <b>LICENCIA</b> </p>
                                                </div>
                                            </div>

                                            <!-- FIN body Productos -->
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <!-- FIN ACORDEÓN -->
                            <!-- FIN body Proyecto -->
                        </div>
                    </div>
                </div>
            }


        </div>

    </div>


}else{
    <h1>Please sign in to see your proyects</h1>
}

